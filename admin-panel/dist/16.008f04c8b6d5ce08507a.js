(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{oTzW:function(e,t,n){"use strict";n.r(t),n.d(t,"LandingPageModule",(function(){return P}));var i=n("Valr"),o=n("qiSS"),a=n("W/RB"),r=n("QJY3"),c=n("DUip"),s=n("IYfF"),l=n("AytR"),g=n("TYT/"),f=n("uLXW"),b=n("eHTH"),d=n("cSbt"),m=n("p+mS"),p=n("GsDI");function u(e,t){if(1&e&&(g.Ub(0,"span",14),g.zc(1),g.Tb()),2&e){var n=g.gc();g.Cb(1),g.Ac(n.loginError)}}function h(e,t){if(1&e){var n=g.Vb();g.Ub(0,"div",17),g.Pb(1,"img",18),g.Ub(2,"mat-icon",19),g.cc("click",(function(){g.sc(n);var e=t.$implicit,i=t.index;return g.gc(2).deleteServerImage(e.imageName,i)})),g.zc(3,"delete_forever"),g.Tb(),g.Tb()}if(2&e){var i=t.$implicit;g.Cb(1),g.lc("src",i.serverPath,g.tc)}}function v(e,t){if(1&e&&(g.Ub(0,"div",15),g.yc(1,h,4,1,"div",16),g.Tb()),2&e){var n=g.gc();g.Cb(1),g.lc("ngForOf",n.server_images)}}function _(e,t){if(1&e){var n=g.Vb();g.Ub(0,"div",17),g.Pb(1,"img",18),g.Ub(2,"mat-icon",19),g.cc("click",(function(){g.sc(n);var e=t.$implicit,i=t.index;return g.gc(2).deleteImage(e,i)})),g.zc(3,"delete_forever"),g.Tb(),g.Tb()}if(2&e){var i=t.$implicit;g.Cb(1),g.lc("src",i,g.tc)}}function C(e,t){if(1&e&&(g.Ub(0,"div",15),g.yc(1,_,4,1,"div",16),g.Tb()),2&e){var n=g.gc();g.Cb(1),g.lc("ngForOf",n.images)}}var x=l.a.fileLocation,O=[{path:"",component:function(){function e(e,t,n){this.fb=e,this.authService=t,this.router=n,this.images=[],this.deletedImages=[],this.loginError="",this.filesrc=[],this.server_images=[]}return e.prototype.ngOnInit=function(){var e=this;this.buildForm(),this.authService.retrieveBySlug("home","home").subscribe((function(t){if(t&&t.data&&t.data._id)if(e._id=t.data._id,t.data.banner_image_path&&t.data.banner_image_path.length){for(var n=0,i=t.data.banner_image_path;n<i.length;n++){var o=i[n];e.server_images.push({imageName:o,serverPath:""+x+o})}e.loginForm.patchValue({name:t.data.name,our_vision:t.data.our_vision,banner_message:t.data.banner_message,fileSource:t.data.banner_image_path})}else e.loginForm.patchValue({name:t.data.name,our_vision:t.data.our_vision,banner_message:t.data.banner_message})}))},e.prototype.deleteServerImage=function(e,t){this.server_images[t]&&(this.deletedImages.push(e),this.server_images.splice(t,1))},e.prototype.deleteImage=function(e,t){this.images[t]&&(this.images.splice(t,1),this.files.splice(t,1))},e.prototype.buildForm=function(){this.loginForm=this.fb.group({name:["",[r.n.required]],our_vision:["",[r.n.required]],banner_message:["",[r.n.required]],file:[""],fileSource:[""]})},Object.defineProperty(e.prototype,"f",{get:function(){return this.loginForm.value},enumerable:!0,configurable:!0}),e.prototype.onFileChange=function(e){var t=this;if(e.target.files&&e.target.files[0]){this.files=[];for(var n=e.target.files.length,i=0;i<n;i++){var o=new FileReader;o.onload=function(e){t.images.push(e.target.result),t.loginForm.patchValue({fileSource:t.images})},this.files.push(e.target.files[i]),o.readAsDataURL(e.target.files[i])}}},e.prototype.onLogin=function(){var e=this,t=new FormData;["name","our_vision","banner_message"].map((function(n){return t.append(n,e.loginForm.value[n])})),this.files&&this.files.forEach((function(e){return t.append("file",e)})),this._id&&(t.append("_id",this._id),this.deletedImages&&t.append("deletable_images",JSON.stringify(this.deletedImages)),this.deletedImages&&t.append("existing_images",JSON.stringify(this.server_images))),this.authService.fileUploadApi("landing_page",t).subscribe((function(t){t.status?(e.loginError="",e._id=t._id,e.router.navigate(["/dashboard"])):e.loginError=t.message}))},e.\u0275fac=function(t){return new(t||e)(g.Ob(r.c),g.Ob(s.a),g.Ob(c.c))},e.\u0275cmp=g.Ib({type:e,selectors:[["app-landing-page"]],decls:25,vars:5,consts:[[1,"wrapper"],[1,"content"],["fxFlex","",1,"login-form",3,"formGroup","submit"],["fxFlex","","class","text-center text-danger","style","color: #f44336;",4,"ngIf"],["fxFlex","","fxlayout","row","fxlayout.lt-md","column"],["fxFlexFill",""],[1,"w-100"],["matInput","","placeholder","Site Name","formControlName","name"],["matInput","","placeholder","Our Vision","formControlName","our_vision"],["matInput","","placeholder","Home Message","formControlName","banner_message"],["fxFlex","","fxLayout","row","fxLayout.lt-md","column"],["type","file","formControlName","file","accept","image/*","multiple","",3,"change"],["class","row",4,"ngIf"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"disabled"],["fxFlex","",1,"text-center","text-danger",2,"color","#f44336"],[1,"row"],["class","column",4,"ngFor","ngForOf"],[1,"column"],["height","150","width","150px",3,"src"],[2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(g.Ub(0,"div",0),g.Ub(1,"div",1),g.Ub(2,"form",2),g.cc("submit",(function(){return t.onLogin()})),g.yc(3,u,2,1,"span",3),g.Ub(4,"div",4),g.Ub(5,"div",5),g.Ub(6,"mat-form-field",6),g.Pb(7,"input",7),g.Tb(),g.Tb(),g.Tb(),g.Ub(8,"div",4),g.Ub(9,"div",5),g.Ub(10,"mat-form-field",6),g.Pb(11,"input",8),g.Tb(),g.Tb(),g.Tb(),g.Ub(12,"div",4),g.Ub(13,"div",5),g.Ub(14,"mat-form-field",6),g.Pb(15,"input",9),g.Tb(),g.Tb(),g.Tb(),g.Ub(16,"div",10),g.Ub(17,"div",5),g.Ub(18,"input",11),g.cc("change",(function(e){return t.onFileChange(e)})),g.Tb(),g.Tb(),g.Tb(),g.yc(19,v,2,1,"div",12),g.yc(20,C,2,1,"div",12),g.Ub(21,"div",10),g.Ub(22,"div",5),g.Ub(23,"button",13),g.zc(24,"Save"),g.Tb(),g.Tb(),g.Tb(),g.Tb(),g.Tb(),g.Tb()),2&e&&(g.Cb(2),g.lc("formGroup",t.loginForm),g.Cb(1),g.lc("ngIf",""!=t.loginError),g.Cb(16),g.lc("ngIf",t.server_images),g.Cb(1),g.lc("ngIf",t.images),g.Cb(3),g.lc("disabled",t.loginForm.invalid))},directives:[r.o,r.k,f.a,r.e,i.k,f.e,b.b,d.b,r.b,r.j,r.d,f.c,m.b,i.j,p.a],styles:['.login-page[_ngcontent-%COMP%]{height:100%;position:relative}.login-page[_ngcontent-%COMP%], .login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{z-index:1}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{margin-top:0;padding-bottom:10px;font-size:32px}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{padding:40px;background:#fff;width:500px;box-shadow:0 0 10px #ddd}.login-page[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill{-webkit-box-shadow:0 0 0 30px #fff inset}.login-page[_ngcontent-%COMP%]:after{background:#fff;top:0;bottom:50%}.login-page[_ngcontent-%COMP%]:after, .login-page[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;right:0}.login-page[_ngcontent-%COMP%]:before{background:#3f51b5;top:50%;bottom:0}.column[_ngcontent-%COMP%]{float:left;width:20%;padding:5px}.row[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}.text-center[_ngcontent-%COMP%]{text-align:center}.w-100[_ngcontent-%COMP%]{width:100%}']}),e}()}],y=function(){function e(){}return e.\u0275mod=g.Mb({type:e}),e.\u0275inj=g.Lb({factory:function(t){return new(t||e)},imports:[[c.f.forChild(O)],c.f]}),e}(),P=function(){function e(){}return e.\u0275mod=g.Mb({type:e}),e.\u0275inj=g.Lb({factory:function(t){return new(t||e)},imports:[[i.c,o.a.withConfig({addFlexToParent:!1}),r.f,r.m,a.a,y]]}),e}()}}]);